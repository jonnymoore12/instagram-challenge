<% if user_signed_in? %>
  <a href='/posts/new'>Add a post</a>
<% end %>
<br />

<% if @posts.any? %>
  <% @posts.each do |post| %>
    <h4> <%= post.caption %> </h4>
    <% if post.user == current_user %>
      <%= link_to "Edit caption", edit_post_path(post) %>
      <%= link_to "Delete post", post_path(post), method: :delete %>
      <br />
    <% end %>
    Posted by <%= post.user.email %>
    <br />
    <%= pluralize post.likes.count, 'like' %>
    <%= link_to "Like this post", post_likes_path(post), method: :post %>
    <br />
    <%= link_to image_tag(post.image.url(:medium)), post_path(post) %>
    <br />
    Comments:
    <% post.comments.each do |comment| %>
      <%= comment.thoughts %>
      <br />
    <% end %>
    <br />
    <%= link_to "Add a comment", new_post_comment_path(post) %>
    <br />
  <% end %>
<% else %>
  No posts yet
<% end %>
